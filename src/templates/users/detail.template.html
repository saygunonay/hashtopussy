{%TEMPLATE->struct/head%}
{%TEMPLATE->struct/menu%}
<h2>[[lang.get('users_detail_user')]] ([[htmlentities([[user.getUsername()]], ENT_QUOTES, "UTF-8")]])</h2>
{%TEMPLATE->struct/messages%}
<div class="panel panel-default">
	<table class="table table-bordered table-nonfluid">
		<tr>
			<th>[[lang.get('table_property_id')]]</th>
			<td>[[user.getId()]]</td>
		</tr>
		<tr>
			<th>[[lang.get('table_property_username')]]</th>
			<td>[[htmlentities([[user.getUsername()]], ENT_QUOTES, "UTF-8")]]</td>
		</tr>
		<tr>
			<th>[[lang.get('table_property_email')]]</th>
			<td>[[user.getEmail()]]</td>
		</tr>
		<tr>
			<th>[[lang.get('table_property_creation_date')]]</th>
			<td>[[date([[config.getVal(DConfig::TIME_FORMAT)]], [[user.getRegisteredSince()]])]]</td>
		</tr>
		<tr>
			<th>[[lang.get('table_property_last_login')]]</th>
			<td>[[date([[config.getVal(DConfig::TIME_FORMAT)]], [[user.getLastLoginDate()]])]]</td>
		</tr>
		<tr>
			<th>[[lang.get('table_property_enable_disable_user')]]</th>
			<td>
				{{IF [[user.getIsValid()]] == 1}}
					[[lang.get('users_detail_user_currently_enabled')]]
					<form class='form-inline' action="users.php?id=[[user.getId()]]" method="post">
						<input type='hidden' name='action' value='[[$DUserAction::DISABLE_USER]]'>
						<input type='hidden' name='user' value='[[user.getId()]]'>
						<input type="hidden" name="csrf" value="[[csrf]]">
						<input type="submit" class='btn btn-warning' value="[[lang.get('button_disable')]]">
					</form>
				{{ELSE}}
					[[lang.get('users_detail_user_currently_disabled')]]
					<form class='form-inline' action="users.php?id=[[user.getId()]]" method="post">
						<input type='hidden' name='action' value='[[$DUserAction::ENABLE_USER]]'>
						<input type='hidden' name='user' value='[[user.getId()]]'>
						<input type="hidden" name="csrf" value="[[csrf]]">
						<input type="submit" class='btn btn-success' value="[[lang.get('button_enable')]]">
					</form>
				{{ENDIF}}
			</td>
		</tr>
		<tr>
			<th>[[lang.get('table_property_set_user_group')]]</th>
			<td>
				<form class='form-inline' action="users.php?id=[[user.getId()]]" method="post">
					<input type='hidden' name='action' value='[[$DUserAction::SET_RIGHTS]]'>
					<input type='hidden' name='user' value='[[user.getId()]]'>
					<input type="hidden" name="csrf" value="[[csrf]]">
					<select name='group' class='form-control'>
						{{FOREACH group;[[groups]]}}
							<option value='[[group.getId()]]'{{IF [[group.getId()]] == [[user.getRightGroupId()]]}} selected{{ENDIF}}>[[group.getGroupName()]] ([[group.getLevel()]])</option>
						{{ENDFOREACH}}
					</select>
					<input type="submit" class='btn btn-default' value="[[lang.get('button_set')]]">
				</form>
			</td>
		</tr>
		<tr>
			<th>[[lang.get('table_property_set_password')]]</th>
			<td>
				<form class='form-inline' action="users.php?id=[[user.getId()]]" method="post">
					<input type='hidden' name='action' value='[[$DUserAction::SET_PASSWORD]]'>
					<input type='hidden' name='user' value='[[user.getId()]]'>
					<input type='password' name='pass' class='form-control'>
					<input type="hidden" name="csrf" value="[[csrf]]">
					<input type="submit" class='btn btn-default' value="[[lang.get('button_set')]]">
				</form>
			</td>
		</tr>
		<tr>
			<th>[[lang.get('table_property_delete_user')]]</th>
			<td>
				<form class='form-inline' action="users.php?id=[[user.getId()]]" method="post">
					<input type='hidden' name='action' value='[[$DUserAction::DELETE_USER]]'>
					<input type='hidden' name='user' value='[[user.getId()]]'>
					<input type="hidden" name="csrf" value="[[csrf]]">
					<input type="submit" class='btn btn-danger' value="[[lang.get('button_delete')]]" onclick="if(!confirm('[[lang.get('users_detail_delete_user_warning')]]')){return false;}">
				</form>
			</td>
		</tr>
	</table>
</div>
{%TEMPLATE->struct/foot%}
